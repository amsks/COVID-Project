{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/mclovin/git/Clouds-Projects/react/covid_project/src/components/Appbar.js\",\n    _s = $RefreshSig$();\n\nimport { AppBar, Button, Dialog, DialogContent, DialogTitle, MenuItem, Select, TextField, Toolbar, Typography } from \"@material-ui/core\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport firebase from \"firebase\";\nimport axios from \"axios\";\nimport { auth, googleProvider, db } from \"../base\";\nexport default function Appbar() {\n  _s();\n\n  // State hooks\n  const [user, setuser] = useState(auth.currentUser);\n  const [dialog, setdialog] = useState(false);\n  const [countries, setcountries] = useState([]);\n  const [selectedCountry, setselectedCountry] = useState(null);\n  const [description, setdescription] = useState(null);\n  const [date, setdate] = useState(null); // Google Sign-in Functionality \n\n  const signInWithGoogle = () => {\n    auth.signInWithPopup(googleProvider).then(res => {\n      var userRef = db.collection(\"users\").doc(res.user.email);\n      userRef.get().then(async doc => {\n        if (doc.exists) {\n          setuser(res.user);\n        } else {\n          auth.signOut(); // setuser(null);\n        }\n      });\n      console.log(res.user);\n    }).catch(error => {\n      console.log(error.message);\n    });\n  }; // Set the current user\n\n\n  useEffect(() => {\n    setuser(auth.currentUser);\n  }, [auth.currentUser]); // Set country data\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const countryUrl = \"https://api.covid19api.com/countries\";\n\n      try {\n        const res = await axios.get(countryUrl);\n        const countries_ = res.data.map(el => el[\"Country\"]).sort();\n        setcountries(countries_);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    fetchData();\n  }, []); // Function to add news to the top bar\n\n  const addNews = () => {\n    console.log(description);\n    console.log(selectedCountry);\n    console.log(new Date().toDateString());\n    console.log(auth.currentUser);\n    db.collection(\"userNews\").doc().set({\n      description: description,\n      date: new Date().toDateString(),\n      user: auth.currentUser.displayName,\n      country: selectedCountry\n    }).then(() => {\n      console.log(\"News Added\");\n    }).catch(error => {\n      console.log(\"error in adding news to DB\");\n    });\n    setdialog(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col sm-12\",\n        children: !user && /*#__PURE__*/_jsxDEV(Button, {\n          color: \"inherit\",\n          onClick: signInWithGoogle,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), user && /*#__PURE__*/_jsxDEV(Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          color: \"inherit\",\n          onClick: () => setdialog(true),\n          children: \"Add News\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n          open: dialog,\n          onClose: () => setdialog(false),\n          children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n            children: \"Let's add some News\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n            children: [\"Specify the news characteristics\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              placeholder: \"Select which country\",\n              id: \"demo-simple-select\",\n              value: selectedCountry,\n              fullWidth: true,\n              style: {\n                marginTop: \"5%\"\n              },\n              onChange: e => setselectedCountry(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                value: \"worldwide\",\n                children: \"WorldWide\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 19\n              }, this), countries.map(country => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: country,\n                children: country\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              placeholder: \"News Descriptioin...\",\n              rows: 5,\n              multiline: true,\n              fullWidth: true,\n              value: description,\n              style: {\n                marginTop: \"5%\"\n              },\n              onChange: e => setdescription(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: addNews,\n              fullWidth: true,\n              children: \"SUBMIT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), user && /*#__PURE__*/_jsxDEV(Button, {\n        color: \"inherit\",\n        onClick: () => {\n          auth.signOut().then(() => console.log(\"signed out\"));\n          setuser(null);\n        },\n        children: \"Signout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Appbar, \"oki240YK1ZE4nMyhAQzyV+axJno=\");\n\n_c = Appbar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Appbar\");","map":{"version":3,"sources":["/home/mclovin/git/Clouds-Projects/react/covid_project/src/components/Appbar.js"],"names":["AppBar","Button","Dialog","DialogContent","DialogTitle","MenuItem","Select","TextField","Toolbar","Typography","React","Fragment","useState","useEffect","firebase","axios","auth","googleProvider","db","Appbar","user","setuser","currentUser","dialog","setdialog","countries","setcountries","selectedCountry","setselectedCountry","description","setdescription","date","setdate","signInWithGoogle","signInWithPopup","then","res","userRef","collection","doc","email","get","exists","signOut","console","log","catch","error","message","fetchData","countryUrl","countries_","data","map","el","sort","addNews","Date","toDateString","set","displayName","country","marginTop","e","target","value"],"mappings":"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","sourcesContent":["import {\n  AppBar,\n  Button,\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  MenuItem,\n  Select,\n  TextField,\n  Toolbar,\n  Typography,\n} from \"@material-ui/core\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport firebase from \"firebase\";\nimport axios from \"axios\";\n\nimport {\n  auth, \n  googleProvider, \n  db\n} from \"../base\"\n\nexport default function Appbar() {\n  \n  // State hooks\n  const [user, setuser] = useState(auth.currentUser);\n  const [dialog, setdialog] = useState(false);\n  const [countries, setcountries] = useState([]);\n  const [selectedCountry, setselectedCountry] = useState(null);\n  const [description, setdescription] = useState(null);\n  const [date, setdate] = useState(null);\n\n  // Google Sign-in Functionality \n  const signInWithGoogle = () => {\n    auth\n      .signInWithPopup(googleProvider)\n      .then((res) => {\n        var userRef = db.collection(\"users\").doc(res.user.email);\n        userRef.get().then(async (doc) => {\n          if (doc.exists) {\n            setuser(res.user);\n          } else {\n            auth.signOut();\n            // setuser(null);\n          }\n        });\n        console.log(res.user);\n      })\n      .catch((error) => {\n        console.log(error.message);\n      });\n  };\n\n  // Set the current user\n  useEffect(() => {\n    setuser(auth.currentUser);\n  }, [auth.currentUser]);\n\n  // Set country data\n  useEffect( () => {\n\n    const fetchData = async () => {\n      \n      const countryUrl = \"https://api.covid19api.com/countries\";\n\n      try {\n        const res = await axios.get(countryUrl);\n        const countries_ = res.data.map((el) => el[\"Country\"]).sort();\n        setcountries(countries_);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    fetchData();\n\n    \n  }, []);\n  \n  // Function to add news to the top bar\n  const addNews = () => {\n    console.log(description);\n    console.log(selectedCountry);\n    console.log(new Date().toDateString());\n    console.log(auth.currentUser);\n    db.collection(\"userNews\")\n      .doc()\n      .set({\n        description: description,\n        date: new Date().toDateString(),\n        user: auth.currentUser.displayName,\n        country: selectedCountry,\n      })\n      .then(() => {\n        console.log(\"News Added\");\n      })\n      .catch((error) => {\n        console.log(\"error in adding news to DB\");\n      });\n    setdialog(false);\n  };\n\n\n  return (\n    <Fragment>\n      <div className=\"container\">    \n        <div className=\"col sm-12\">\n        {!user && (\n          <Button color=\"inherit\" onClick={signInWithGoogle}>\n            Login\n          </Button>\n        )}\n        </div>\n        {user && (\n          <Fragment>\n            <Button color=\"inherit\" onClick={() => setdialog(true)}>\n              Add News\n            </Button>\n            <Dialog open={dialog} onClose={() => setdialog(false)}>\n              <DialogTitle>Let's add some News</DialogTitle>\n              <DialogContent>\n                Specify the news characteristics\n                <br />\n                <Select\n                  placeholder={\"Select which country\"}\n                  id=\"demo-simple-select\"\n                  value={selectedCountry}\n                  fullWidth\n                  style={{ marginTop: \"5%\" }}\n                  onChange={(e) => setselectedCountry(e.target.value)}\n                >\n                  <MenuItem value={\"worldwide\"}>WorldWide</MenuItem>\n                  {countries.map((country) => (\n                    <MenuItem value={country}>{country}</MenuItem>\n                  ))}\n                </Select>\n                <br />\n                <TextField\n                  placeholder=\"News Descriptioin...\"\n                  rows={5}\n                  multiline\n                  fullWidth\n                  value={description}\n                  style={{ marginTop: \"5%\" }}\n                  onChange={(e) => setdescription(e.target.value)}\n                />\n                <Button variant=\"contained\" onClick={addNews} fullWidth>\n                  SUBMIT\n                </Button>\n              </DialogContent>\n            </Dialog>\n          </Fragment>\n        )}\n        {user && (\n          <Button\n            color=\"inherit\"\n            onClick={() => {\n              auth.signOut().then(() => console.log(\"signed out\"));\n              setuser(null);\n            }}\n          >\n            Signout\n          </Button>\n        )}\n      </div>\n    </Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}