{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/mclovin/git/Clouds-Projects/react/covid_project/src/pages/Home.js\",\n    _s = $RefreshSig$();\n\n// General Imports \nimport React, { useState, useEffect, Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Fab from \"@material-ui/core/Fab\";\nimport { Redirect, withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { AppBar, Button, Toolbar, Typography } from \"@material-ui/core\"; // Import the Custom Components\n\nimport Summary from \"../components/Summary\";\nimport PieChartCovid from \"../components/PieChartCovid\";\nimport BarChartCovid from \"../components/BarChartCovid\";\nimport LineChartCovid from \"../components/LineChartCovid\";\nimport CovidCountryTable from \"../components/CovidCountryTable\";\nimport firebase from \"firebase\"; //firebase Imports\n\nimport { app } from \"../base\";\nconst db = app.firestore();\n\nfunction HomePage({\n  history\n}) {\n  _s();\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [covidSummary, setCovidSummary] = useState({});\n  const [covidWorld, setCovidWorld] = useState([]);\n  const [lastSevenDays, setLastSevenDays] = useState({});\n  const [lastThirtyDays, setLastThirtyDays] = useState({});\n  var latestNewsRef = db.collection(\"news\").doc(\"global\");\n\n  const updateDB = (data, date, doc) => {\n    db.collection(\"news\").doc(doc).set({\n      content: data,\n      date: date\n    }).then(() => {\n      console.log(\"DB updated\");\n    }).catch(error => {\n      console.log(\"error in updating DB\");\n    });\n  }; // Run UseEffect once to get the data through the api call\n\n\n  useEffect(async () => {\n    const summaryUrl = \"https://api.covid19api.com/summary\";\n    const lastSevenDaysUrl = \"https://corona.lmao.ninja/v2/historical/all?lastdays=8\";\n    const lastThirtyDaysUrl = \"https://corona.lmao.ninja/v2/historical/all\";\n\n    try {\n      latestNewsRef.get().then(async doc => {\n        const today = parseInt(new Date().getTime() / 86400000);\n\n        if (doc.exists) {\n          const date = doc.data().date; // If the date is after the last update on firestore\n          // Update the database \n\n          if (today > date) {\n            const resSummary = await axios.get(summaryUrl);\n            setCovidSummary(resSummary.data);\n            updateDB(resSummary.data, today, \"global\");\n          } else {\n            console.log(\"cached from DB\");\n            setCovidSummary(doc.data().content);\n          }\n        } else {\n          const resSummary = await axios.get(summaryUrl);\n          setCovidSummary(resSummary.data);\n          updateDB(resSummary.data, today, \"global\");\n        }\n      });\n      const resSeven = await axios.get(lastSevenDaysUrl);\n      setLastSevenDays(resSeven.data);\n      const resThirty = await axios.get(lastThirtyDaysUrl);\n      setLastThirtyDays(resThirty.data);\n    } catch (error) {\n      console.log(error);\n    }\n  }, []); // Google Authentication\n\n  const auth = app.auth();\n  const [user, setuser] = useState(auth.currentUser);\n  const googleProvider = new app.auth.GoogleAuthProvider();\n\n  const signInWithGoogle = () => {\n    auth.signInWithPopup(googleProvider).then(res => {\n      var userRef = db.collection(\"users\").doc(res.user.email);\n      userRef.get().then(async doc => {\n        if (doc.exists) {\n          setuser(res.user);\n        } else {\n          auth.signOut();\n        }\n      });\n      console.log(res.user);\n    }).catch(error => {\n      console.log(error.message);\n    });\n  }; // set the user after authenticating\n\n\n  useEffect(() => {\n    setuser(auth.currentUser);\n  }, [auth.currentUser]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(AppBar, {\n          position: \"static\",\n          children: /*#__PURE__*/_jsxDEV(Toolbar, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              style: {\n                flexGrow: 1\n              },\n              children: [\"Welcome \", user ? user.displayName : \"To Our Website\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this), !user && /*#__PURE__*/_jsxDEV(Button, {\n              color: \"inherit\",\n              onClick: signInWithGoogle,\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this), user && /*#__PURE__*/_jsxDEV(Button, {\n              color: \"inherit\",\n              onClick: () => {\n                auth.signOut().then(() => console.log('signed out'));\n                setuser(null);\n              },\n              children: \"Signout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), Object.keys(covidSummary).includes(\"Global\") && /*#__PURE__*/_jsxDEV(Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Summary, {\n            data: covidSummary[\"Global\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(PieChartCovid, {\n            data: covidSummary[\"Global\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), lastSevenDays && /*#__PURE__*/_jsxDEV(Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(BarChartCovid, {\n            data: lastSevenDays\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(LineChartCovid, {\n            data: lastThirtyDays\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), Object.keys(covidSummary).includes(\"Global\") && /*#__PURE__*/_jsxDEV(Fragment, {\n          children: /*#__PURE__*/_jsxDEV(CovidCountryTable, {\n            data: covidSummary[\"Countries\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}\n\n_s(HomePage, \"iuIwRaqmVgt8CeQXQEvnqypiIwo=\");\n\n_c = HomePage;\nHomePage.propTypes = {};\nexport default _c2 = withRouter(HomePage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"HomePage\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/mclovin/git/Clouds-Projects/react/covid_project/src/pages/Home.js"],"names":["React","useState","useEffect","Fragment","PropTypes","Fab","Redirect","withRouter","axios","AppBar","Button","Toolbar","Typography","Summary","PieChartCovid","BarChartCovid","LineChartCovid","CovidCountryTable","firebase","app","db","firestore","HomePage","history","loggedIn","setLoggedIn","covidSummary","setCovidSummary","covidWorld","setCovidWorld","lastSevenDays","setLastSevenDays","lastThirtyDays","setLastThirtyDays","latestNewsRef","collection","doc","updateDB","data","date","set","content","then","console","log","catch","error","summaryUrl","lastSevenDaysUrl","lastThirtyDaysUrl","get","today","parseInt","Date","getTime","exists","resSummary","resSeven","resThirty","auth","user","setuser","currentUser","googleProvider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","res","userRef","email","signOut","message","flexGrow","displayName","Object","keys","includes","propTypes"],"mappings":";;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,QAArC,QAAqD,OAArD;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,kBAArC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,OAAzB,EAAkCC,UAAlC,QAAmD,mBAAnD,C,CAEA;;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,iBAAP,MAA8B,iCAA9B;AACA,OAAOC,QAAP,MAAqB,UAArB,C,CAEA;;AACA,SAAQC,GAAR,QAAkB,SAAlB;AAEA,MAAMC,EAAE,GAAGD,GAAG,CAACE,SAAJ,EAAX;;AAEA,SAASC,QAAT,CAAkB;AAAEC,EAAAA;AAAF,CAAlB,EAA+B;AAAA;;AAC7B,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BxB,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAACyB,YAAD,EAAeC,eAAf,IAAkC1B,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAAC2B,UAAD,EAAaC,aAAb,IAA8B5B,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAAC6B,aAAD,EAAgBC,gBAAhB,IAAoC9B,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAAC+B,cAAD,EAAiBC,iBAAjB,IAAsChC,QAAQ,CAAC,EAAD,CAApD;AAEA,MAAIiC,aAAa,GAAGd,EAAE,CAACe,UAAH,CAAc,MAAd,EAAsBC,GAAtB,CAA0B,QAA1B,CAApB;;AAEA,QAAMC,QAAQ,GAAG,CAACC,IAAD,EAAOC,IAAP,EAAaH,GAAb,KAAqB;AACpChB,IAAAA,EAAE,CAACe,UAAH,CAAc,MAAd,EAAsBC,GAAtB,CAA0BA,GAA1B,EAA+BI,GAA/B,CAAmC;AAC/BC,MAAAA,OAAO,EAAEH,IADsB;AAE/BC,MAAAA,IAAI,EAAEA;AAFyB,KAAnC,EAGKG,IAHL,CAGU,MAAM;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACD,KALH,EAMGC,KANH,CAMUC,KAAD,IAAW;AAChBH,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD,KARH;AASD,GAVD,CAT6B,CAqB7B;;;AACA1C,EAAAA,SAAS,CAAC,YAAY;AAEpB,UAAM6C,UAAU,GAAG,oCAAnB;AACA,UAAMC,gBAAgB,GAAG,wDAAzB;AACA,UAAMC,iBAAiB,GAAG,6CAA1B;;AAEA,QAAI;AACFf,MAAAA,aAAa,CAACgB,GAAd,GAAoBR,IAApB,CAAyB,MAAON,GAAP,IAAe;AACtC,cAAMe,KAAK,GAAGC,QAAQ,CAAC,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,QAAxB,CAAtB;;AACA,YAAIlB,GAAG,CAACmB,MAAR,EAAgB;AACd,gBAAMhB,IAAI,GAAGH,GAAG,CAACE,IAAJ,GAAWC,IAAxB,CADc,CAEd;AACA;;AACA,cAAIY,KAAK,GAAGZ,IAAZ,EAAkB;AAChB,kBAAMiB,UAAU,GAAG,MAAMhD,KAAK,CAAC0C,GAAN,CAAUH,UAAV,CAAzB;AACApB,YAAAA,eAAe,CAAC6B,UAAU,CAAClB,IAAZ,CAAf;AACAD,YAAAA,QAAQ,CAACmB,UAAU,CAAClB,IAAZ,EAAkBa,KAAlB,EAAyB,QAAzB,CAAR;AACD,WAJD,MAIO;AACLR,YAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACAjB,YAAAA,eAAe,CAACS,GAAG,CAACE,IAAJ,GAAWG,OAAZ,CAAf;AACD;AACF,SAZD,MAaK;AACH,gBAAMe,UAAU,GAAG,MAAMhD,KAAK,CAAC0C,GAAN,CAAUH,UAAV,CAAzB;AACApB,UAAAA,eAAe,CAAC6B,UAAU,CAAClB,IAAZ,CAAf;AACAD,UAAAA,QAAQ,CAACmB,UAAU,CAAClB,IAAZ,EAAkBa,KAAlB,EAAyB,QAAzB,CAAR;AACD;AACF,OApBD;AAsBA,YAAMM,QAAQ,GAAG,MAAMjD,KAAK,CAAC0C,GAAN,CAAUF,gBAAV,CAAvB;AACAjB,MAAAA,gBAAgB,CAAC0B,QAAQ,CAACnB,IAAV,CAAhB;AACA,YAAMoB,SAAS,GAAG,MAAMlD,KAAK,CAAC0C,GAAN,CAAUD,iBAAV,CAAxB;AACAhB,MAAAA,iBAAiB,CAACyB,SAAS,CAACpB,IAAX,CAAjB;AAED,KA5BD,CA4BE,OAAOQ,KAAP,EAAc;AACdH,MAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD;AACF,GArCQ,EAqCN,EArCM,CAAT,CAtB6B,CA6D7B;;AACA,QAAMa,IAAI,GAAGxC,GAAG,CAACwC,IAAJ,EAAb;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkB5D,QAAQ,CAAC0D,IAAI,CAACG,WAAN,CAAhC;AACA,QAAMC,cAAc,GAAG,IAAI5C,GAAG,CAACwC,IAAJ,CAASK,kBAAb,EAAvB;;AACA,QAAMC,gBAAgB,GAAG,MAAM;AAC7BN,IAAAA,IAAI,CAACO,eAAL,CAAqBH,cAArB,EAAqCrB,IAArC,CAA2CyB,GAAD,IAAS;AAEjD,UAAIC,OAAO,GAAGhD,EAAE,CAACe,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2B+B,GAAG,CAACP,IAAJ,CAASS,KAApC,CAAd;AAEAD,MAAAA,OAAO,CAAClB,GAAR,GAAcR,IAAd,CAAmB,MAAON,GAAP,IAAe;AAChC,YAAIA,GAAG,CAACmB,MAAR,EAAgB;AACdM,UAAAA,OAAO,CAACM,GAAG,CAACP,IAAL,CAAP;AACD,SAFD,MAEO;AACLD,UAAAA,IAAI,CAACW,OAAL;AACD;AACF,OAND;AAQA3B,MAAAA,OAAO,CAACC,GAAR,CAAYuB,GAAG,CAACP,IAAhB;AACD,KAbD,EAaGf,KAbH,CAaUC,KAAD,IAAW;AAChBH,MAAAA,OAAO,CAACC,GAAR,CAAYE,KAAK,CAACyB,OAAlB;AACH,KAfD;AAgBD,GAjBD,CAjE6B,CAoF7B;;;AACArE,EAAAA,SAAS,CAAC,MAAM;AACd2D,IAAAA,OAAO,CAACF,IAAI,CAACG,WAAN,CAAP;AACD,GAFQ,EAEN,CAACH,IAAI,CAACG,WAAN,CAFM,CAAT;AAKA,sBACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,6BACE,QAAC,QAAD;AAAA,gCACE,QAAC,MAAD;AAAQ,UAAA,QAAQ,EAAC,QAAjB;AAAA,iCACE,QAAC,OAAD;AAAA,oCACE,QAAC,UAAD;AAAY,cAAA,OAAO,EAAC,IAApB;AAAyB,cAAA,KAAK,EAAE;AAAEU,gBAAAA,QAAQ,EAAE;AAAZ,eAAhC;AAAA,qCACWZ,IAAI,GAAGA,IAAI,CAACa,WAAR,GAAsB,gBADrC;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAIG,CAACb,IAAD,iBACC,QAAC,MAAD;AAAQ,cAAA,KAAK,EAAC,SAAd;AAAwB,cAAA,OAAO,EAAEK,gBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALJ,EASGL,IAAI,iBACH,QAAC,MAAD;AACE,cAAA,KAAK,EAAC,SADR;AAEE,cAAA,OAAO,EAAE,MAAM;AACbD,gBAAAA,IAAI,CAACW,OAAL,GAAe5B,IAAf,CAAoB,MAAIC,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAxB;AACAiB,gBAAAA,OAAO,CAAC,IAAD,CAAP;AACD,eALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,EAwBGa,MAAM,CAACC,IAAP,CAAYjD,YAAZ,EAA0BkD,QAA1B,CAAmC,QAAnC,kBACC,QAAC,QAAD;AAAA,kCACE,QAAC,OAAD;AAAS,YAAA,IAAI,EAAElD,YAAY,CAAC,QAAD;AAA3B;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,aAAD;AAAe,YAAA,IAAI,EAAEA,YAAY,CAAC,QAAD;AAAjC;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzBJ,EA8BGI,aAAa,iBACZ,QAAC,QAAD;AAAA,kCACE,QAAC,aAAD;AAAe,YAAA,IAAI,EAAEA;AAArB;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,cAAD;AAAgB,YAAA,IAAI,EAAEE;AAAtB;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA/BJ,EAoCG0C,MAAM,CAACC,IAAP,CAAYjD,YAAZ,EAA0BkD,QAA1B,CAAmC,QAAnC,kBACC,QAAC,QAAD;AAAA,iCACE,QAAC,iBAAD;AAAmB,YAAA,IAAI,EAAElD,YAAY,CAAC,WAAD;AAArC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBArCJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAgDD;;GA1IQJ,Q;;KAAAA,Q;AA4ITA,QAAQ,CAACuD,SAAT,GAAqB,EAArB;AAEA,qBAAetE,UAAU,CAACe,QAAD,CAAzB","sourcesContent":["// General Imports \nimport React, { useState, useEffect, Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Fab from \"@material-ui/core/Fab\";\nimport { Redirect, withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { AppBar, Button, Toolbar, Typography} from \"@material-ui/core\";\n\n// Import the Custom Components\nimport Summary from \"../components/Summary\";\nimport PieChartCovid from \"../components/PieChartCovid\";\nimport BarChartCovid from \"../components/BarChartCovid\";\nimport LineChartCovid from \"../components/LineChartCovid\";\nimport CovidCountryTable from \"../components/CovidCountryTable\";\nimport firebase from \"firebase\";\n\n//firebase Imports\nimport {app} from \"../base\"\n\nconst db = app.firestore();\n\nfunction HomePage({ history }) {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [covidSummary, setCovidSummary] = useState({});\n  const [covidWorld, setCovidWorld] = useState([]);\n  const [lastSevenDays, setLastSevenDays] = useState({});\n  const [lastThirtyDays, setLastThirtyDays] = useState({});\n  \n  var latestNewsRef = db.collection(\"news\").doc(\"global\");\n\n  const updateDB = (data, date, doc) => {\n    db.collection(\"news\").doc(doc).set({\n        content: data,\n        date: date,\n      }).then(() => {\n        console.log(\"DB updated\");\n      })\n      .catch((error) => {\n        console.log(\"error in updating DB\");\n      });\n  };\n\n  // Run UseEffect once to get the data through the api call\n  useEffect(async () => {\n\n    const summaryUrl = \"https://api.covid19api.com/summary\" ;\n    const lastSevenDaysUrl = \"https://corona.lmao.ninja/v2/historical/all?lastdays=8\" ; \n    const lastThirtyDaysUrl = \"https://corona.lmao.ninja/v2/historical/all\" ; \n\n    try {\n      latestNewsRef.get().then(async (doc) => {\n        const today = parseInt(new Date().getTime() / 86400000);\n        if (doc.exists) {\n          const date = doc.data().date;\n          // If the date is after the last update on firestore\n          // Update the database \n          if (today > date) {\n            const resSummary = await axios.get(summaryUrl);\n            setCovidSummary(resSummary.data);\n            updateDB(resSummary.data, today, \"global\");\n          } else {\n            console.log(\"cached from DB\");\n            setCovidSummary(doc.data().content);\n          }\n        } \n        else {\n          const resSummary = await axios.get(summaryUrl);\n          setCovidSummary(resSummary.data);\n          updateDB(resSummary.data, today, \"global\");\n        }\n      });\n\n      const resSeven = await axios.get(lastSevenDaysUrl);\n      setLastSevenDays(resSeven.data);\n      const resThirty = await axios.get(lastThirtyDaysUrl);\n      setLastThirtyDays(resThirty.data);\n\n    } catch (error) {\n      console.log(error);\n    }\n  }, []);\n\n  // Google Authentication\n  const auth = app.auth();\n  const [user, setuser] = useState(auth.currentUser);\n  const googleProvider = new app.auth.GoogleAuthProvider();\n  const signInWithGoogle = () => {\n    auth.signInWithPopup(googleProvider).then((res) => {\n        \n      var userRef = db.collection(\"users\").doc(res.user.email);\n      \n      userRef.get().then(async (doc) => {    \n        if (doc.exists) {\n          setuser(res.user);\n        } else {\n          auth.signOut();\n        }\n      });\n      \n      console.log(res.user);\n    }).catch((error) => {\n        console.log(error.message);\n    });\n  };\n  \n  // set the user after authenticating\n  useEffect(() => {\n    setuser(auth.currentUser)\n  }, [auth.currentUser])\n\n  \n  return (\n    <div className=\"home\">\n      <div className=\"container\">\n        <Fragment>\n          <AppBar position=\"static\">\n            <Toolbar>\n              <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\n                Welcome {user ? user.displayName : \"To Our Website\"}\n              </Typography>\n              {!user && (\n                <Button color=\"inherit\" onClick={signInWithGoogle}>\n                  Login\n                </Button>\n              )}\n              {user && (\n                <Button\n                  color=\"inherit\"\n                  onClick={() => {\n                    auth.signOut().then(()=>console.log('signed out'));\n                    setuser(null);\n                  }}\n                >\n                  Signout\n                </Button>\n              )}\n            </Toolbar>\n          </AppBar>\n          {Object.keys(covidSummary).includes(\"Global\") && (\n            <Fragment>\n              <Summary data={covidSummary[\"Global\"]} />\n              <PieChartCovid data={covidSummary[\"Global\"]} />\n            </Fragment>\n          )}\n          {lastSevenDays && (\n            <Fragment>\n              <BarChartCovid data={lastSevenDays} />\n              <LineChartCovid data={lastThirtyDays} />\n            </Fragment>\n          )}\n          {Object.keys(covidSummary).includes(\"Global\") && (\n            <Fragment>\n              <CovidCountryTable data={covidSummary[\"Countries\"]} />\n            </Fragment>\n          )}\n        </Fragment>\n      </div>\n    </div>\n  );\n}\n\nHomePage.propTypes = {};\n\nexport default withRouter(HomePage);\n"]},"metadata":{},"sourceType":"module"}