{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/mclovin/git/Clouds-Projects/react/covid_project/src/pages/Country.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, Fragment } from \"react\";\nimport { Redirect, withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Card, CardContent } from \"@material-ui/core\";\nimport Summary from \"../components/Summary\";\nimport { useHistory } from \"react-router-dom\";\nimport PieChartCovid from \"../components/PieChartCovid\";\nimport BarChartCovid from \"../components/BarChartCovid\";\nimport LineChartCovid from \"../components/LineChartCovid\";\nimport CovidCountryTable from \"../components/CovidCountryTable\";\nimport firebase from \"firebase\";\nimport Appbar from \"../components/Appbar\";\nimport { app } from \"../base\";\nconst db = app.firestore();\n\nfunction Country({\n  location\n}) {\n  _s();\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [covidSummary, setCovidSummary] = useState({});\n  const [covidWorld, setCovidWorld] = useState([]);\n  const [lastSevenDays, setLastSevenDays] = useState({});\n  const [lastThirtyDays, setLastThirtyDays] = useState({});\n  const [countryNews, setCountryNews] = useState([]);\n  const history = useHistory();\n  var latestNewsRef = db.collection(\"news\").doc(location.state); // Update Database\n\n  const updateDB = (data, date, doc) => {\n    db.collection(\"news\").doc(doc).set({\n      content: data,\n      date: date\n    }).then(() => {\n      console.log(\"DB updated\");\n    }).catch(error => {\n      console.log(\"error in updating DB\");\n    });\n  }; // Handling User News \n\n\n  useEffect(() => {\n    db.collection(\"userNews\").where(\"country\", \"==\", location.state).get().then(function (querySnapshot) {\n      let newNews = [];\n      querySnapshot.forEach(function (doc) {\n        // doc.data() is never undefined for query doc snapshots\n        newNews.push(doc.data());\n      });\n      setCountryNews(newNews);\n    }).catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n    });\n  }, []); // Fetching the Country Data \n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        latestNewsRef.get().then(async doc => {\n          const today = parseInt(new Date().getTime() / 86400000);\n\n          if (doc.exists) {\n            const date = doc.data().date;\n\n            if (today > date) {\n              const resThirty = await axios.get(`https://corona.lmao.ninja/v3/covid-19/historical/${location.slug}`);\n              setLastThirtyDays(resThirty.data.timeline);\n              updateDB(resThirty.data.timeline, today, location.state);\n            } else {\n              console.log(\"cached from DB\");\n              setLastThirtyDays(doc.data().content);\n            }\n          } else {\n            const resThirty = await axios.get(`https://corona.lmao.ninja/v3/covid-19/historical/${location.slug}`);\n            setLastThirtyDays(resThirty.data.timeline);\n            updateDB(resThirty.data.timeline, today, location.state);\n          }\n        });\n        setCovidSummary(location.summary);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    fetchData();\n  }, []);\n  const auth = firebase.auth();\n  const [user, setuser] = useState(auth.currentUser);\n  const googleProvider = new firebase.auth.GoogleAuthProvider();\n\n  const signInWithGoogle = () => {\n    auth.signInWithPopup(googleProvider).then(res => {\n      var userRef = db.collection(\"users\").doc(res.user.email);\n      userRef.get().then(async doc => {\n        if (doc.exists) {\n          setuser(res.user);\n        } else {\n          auth.signOut();\n        }\n      });\n      console.log(res.user);\n    }).catch(error => {\n      console.log(error.message);\n    });\n  };\n\n  useEffect(() => {\n    setuser(auth.currentUser);\n  }, [auth.currentUser]); // console.log(lastThirtyDays);\n\n  if (!location.state) {\n    history.push(\"/\");\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Country\",\n      children: /*#__PURE__*/_jsxDEV(Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(Appbar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this), countryNews.length > 0 ? countryNews.map(el => /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              margin: \"1%\",\n              maxWidth: \"200px\",\n              overflow: 'scroll'\n            },\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [\"User: \", el.user, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 23\n              }, this), \"Date: \", el.date, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 23\n              }, this), \"Description: \", el.description]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 19\n          }, this)) : /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              margin: \"1%\",\n              maxWidth: \"200px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: \"No News!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 17\n          }, this), covidSummary && Object.keys(covidSummary).includes(\"Country\") && /*#__PURE__*/_jsxDEV(Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Summary, {\n              data: covidSummary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(PieChartCovid, {\n              data: covidSummary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), lastThirtyDays && Object.keys(lastThirtyDays).includes(\"cases\") && /*#__PURE__*/_jsxDEV(Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(BarChartCovid, {\n              data: lastThirtyDays\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(LineChartCovid, {\n              data: lastThirtyDays\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(Country, \"cwTTaPlwr6WJ1fsNw9YY0oa+3Xg=\", false, function () {\n  return [useHistory];\n});\n\n_c = Country;\nCountry.propTypes = {};\nexport default _c2 = withRouter(Country);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Country\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/mclovin/git/Clouds-Projects/react/covid_project/src/pages/Country.js"],"names":["React","useState","useEffect","Fragment","Redirect","withRouter","axios","Card","CardContent","Summary","useHistory","PieChartCovid","BarChartCovid","LineChartCovid","CovidCountryTable","firebase","Appbar","app","db","firestore","Country","location","loggedIn","setLoggedIn","covidSummary","setCovidSummary","covidWorld","setCovidWorld","lastSevenDays","setLastSevenDays","lastThirtyDays","setLastThirtyDays","countryNews","setCountryNews","history","latestNewsRef","collection","doc","state","updateDB","data","date","set","content","then","console","log","catch","error","where","get","querySnapshot","newNews","forEach","push","fetchData","today","parseInt","Date","getTime","exists","resThirty","slug","timeline","summary","auth","user","setuser","currentUser","googleProvider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","res","userRef","email","signOut","message","length","map","el","margin","maxWidth","overflow","description","Object","keys","includes","propTypes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from \"react\";\nimport { Redirect, withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nimport {\n  Card,\n  CardContent,\n} from \"@material-ui/core\";\nimport Summary from \"../components/Summary\";\nimport { useHistory } from \"react-router-dom\";\nimport PieChartCovid from \"../components/PieChartCovid\";\nimport BarChartCovid from \"../components/BarChartCovid\";\nimport LineChartCovid from \"../components/LineChartCovid\";\nimport CovidCountryTable from \"../components/CovidCountryTable\";\nimport firebase from \"firebase\";\nimport Appbar from \"../components/Appbar\";\n\nimport {app} from \"../base\"\n\nconst db = app.firestore()\n\n\nfunction Country({ location }) {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [covidSummary, setCovidSummary] = useState({});\n  const [covidWorld, setCovidWorld] = useState([]);\n  const [lastSevenDays, setLastSevenDays] = useState({});\n  const [lastThirtyDays, setLastThirtyDays] = useState({});\n  const [countryNews, setCountryNews] = useState([]);\n\n  const history = useHistory();\n  var latestNewsRef = db.collection(\"news\").doc(location.state);\n\n  // Update Database\n  const updateDB = (data, date, doc) => {\n    db.collection(\"news\").doc(doc).set({\n        content: data,\n        date: date,\n    }).then(() => {\n        console.log(\"DB updated\");\n    }).catch((error) => {\n        console.log(\"error in updating DB\");\n    });\n  };\n\n  // Handling User News \n  useEffect(() => {\n    db.collection(\"userNews\")\n      .where(\"country\", \"==\", location.state).get().then(function (querySnapshot) {\n        let newNews = [];\n        querySnapshot.forEach(function (doc) {\n          // doc.data() is never undefined for query doc snapshots\n          newNews.push(doc.data());\n        });\n        setCountryNews(newNews);\n      }).catch(function (error) {\n        console.log(\"Error getting documents: \", error);\n      });\n  }, []);\n\n  // Fetching the Country Data \n  useEffect( () => {\n    \n    const fetchData = async () =>  {\n      try {\n        latestNewsRef.get().then(async (doc) => {\n          const today = parseInt(new Date().getTime() / 86400000);\n          if (doc.exists) {\n            const date = doc.data().date;\n            if (today > date) {\n              const resThirty = await axios.get(\n                `https://corona.lmao.ninja/v3/covid-19/historical/${location.slug}`\n              );\n              setLastThirtyDays(resThirty.data.timeline);\n              updateDB(resThirty.data.timeline, today, location.state);\n            } else {\n              console.log(\"cached from DB\");\n              setLastThirtyDays(doc.data().content);\n            }\n          } else {\n            const resThirty = await axios.get(\n              `https://corona.lmao.ninja/v3/covid-19/historical/${location.slug}`\n            );\n            setLastThirtyDays(resThirty.data.timeline);\n            updateDB(resThirty.data.timeline, today, location.state);\n          }\n        });\n\n        setCovidSummary(location.summary);\n\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    fetchData(); \n\n  }, []);\n\n\n  const auth = firebase.auth();\n  const [user, setuser] = useState(auth.currentUser);\n  const googleProvider = new firebase.auth.GoogleAuthProvider();\n  const signInWithGoogle = () => {\n    auth\n      .signInWithPopup(googleProvider)\n      .then((res) => {\n        var userRef = db.collection(\"users\").doc(res.user.email);\n        userRef.get().then(async (doc) => {\n          if (doc.exists) {\n            setuser(res.user);\n          } else {\n            auth.signOut();          }\n        });\n        console.log(res.user);\n      })\n      .catch((error) => {\n        console.log(error.message);\n      });\n  };\n  useEffect(() => {\n    setuser(auth.currentUser)\n  }, [auth.currentUser])\n  // console.log(lastThirtyDays);\n  if (!location.state){\n    history.push(\"/\");\n  } \n  else {\n    return (\n      <div className=\"Country\">\n        <Fragment>\n          <div className=\"container\">\n            {/* <div className=\"col-lg-2\"> */}\n              <Appbar />\n              {countryNews.length > 0 ? (\n                countryNews.map((el) => (\n                  <Card style={{ margin: \"1%\", maxWidth: \"200px\", overflow:'scroll' }}>\n                    <CardContent>\n                      User: {el.user}\n                      <br />\n                      Date: {el.date}\n                      <br />\n                      Description: {el.description}\n                    </CardContent>\n                  </Card>\n                ))\n              ) : (\n                <Card style={{ margin: \"1%\", maxWidth: \"200px\" }}>\n                  <CardContent>No News!</CardContent>\n                </Card>\n              )}\n            {/* </div> */}\n            {covidSummary && Object.keys(covidSummary).includes(\"Country\") && (\n              <Fragment>\n                <Summary data={covidSummary} />\n                <PieChartCovid data={covidSummary} />\n              </Fragment>\n            )}\n            {lastThirtyDays && Object.keys(lastThirtyDays).includes(\"cases\") && (\n              <Fragment>\n                <BarChartCovid data={lastThirtyDays} />\n                <LineChartCovid data={lastThirtyDays} />\n              </Fragment>\n            )}\n          </div>\n        </Fragment>\n      </div>\n    );\n  }\n    \n}\n\nCountry.propTypes = {};\n\nexport default withRouter(Country);\n"]},"metadata":{},"sourceType":"module"}